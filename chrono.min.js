!function(){var chrono={};chrono.parsers={};chrono.importantdays={};chrono.parse=function(text,referrenceDate,option){var parser=this.IntegratedParser(text,referrenceDate,option);parser.execAll();return parser.results()};chrono.parseDate=function(text,referrenceDate,option){var results=this.parse(text,referrenceDate,option);if(results.length>=1)return results[0].startDate;else return null};if(typeof exports=="undefined"){var moment=window.moment;window.chrono=chrono}else{var fs=require("fs");var moment=require("moment");eval(fs.readFileSync(__dirname+"/parsers/ParseResult.js")+"");eval(fs.readFileSync(__dirname+"/parsers/Parser.js")+"");eval(fs.readFileSync(__dirname+"/parsers/IntegratedParser.js")+"");var parser_dirs=fs.readdirSync(__dirname+"/parsers");parser_dirs=parser_dirs.filter(function(name){return!name.match(/\./)});for(var i in parser_dirs){var dirname=parser_dirs[i];if(typeof dirname=="function")continue;var parser_files=fs.readdirSync(__dirname+"/parsers/"+dirname);for(var j in parser_files){var filename=parser_files[j];if(typeof filename=="function")continue;if(!filename.match(/\.js$/))continue;eval(fs.readFileSync(__dirname+"/parsers/"+dirname+"/"+filename)+"")}}module.exports=chrono}}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function DateComponents(components){this.year=components.year;this.month=components.month;this.day=components.day;this.hour=components.hour;this.minute=components.minute;this.second=components.second;if(components.impliedComponents&&components.impliedComponents.length>0){this.impliedComponents=components.impliedComponents}this.date=function(){var dateMoment=moment(new Date(this.year,this.month,this.day));dateMoment.hours(this.hour);dateMoment.minutes(this.minute);dateMoment.seconds(this.second);return dateMoment.toDate()}}function ParseResult(result){this.start=new DateComponents(result.start);this.startDate=this.start.date();if(result.end){this.end=new DateComponents(result.end);this.endDate=this.end.date()}this.referenceDate=result.referenceDate;this.index=result.index;this.text=result.text;this.concordance=result.concordance;if(result.timezoneOffset){this.timezoneOffset=result.timezoneOffset}}chrono.DateComponents=DateComponents;chrono.ParseResult=ParseResult}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function Parser(text,ref,opt){var searchingIndex=0;var searchingText=text;var searchingFinished=false;var searchingResults=[];var parser={};parser.pattern=function(){return/./i};parser.extract=function(text,index){return null};parser.results=function(){return searchingResults};parser.finished=function(){return searchingFinished};parser.mergeOverlapResult=function(text,result1,result2){if(result1.end||result2.end)return null;if(result2.index<result1.index){var tmp=result1;result1=result2;result2=tmp}var begin=result1.index+result1.text.length;var end=result2.index;var textBetween=text.substring(begin,end);var OVERLAP_PATTERN=/^\s*(to|\-)\s*$/i;if(!textBetween.match(OVERLAP_PATTERN))return null;var mergedText=result1.text+textBetween+result2.text;var impliedComponents1=result1.start.impliedComponents||[];var impliedComponents2=result2.start.impliedComponents||[];impliedComponents1.forEach(function(component){if(!result2.start.impliedComponents||result2.start.impliedComponents.indexOf(component)<0){result1.start[component]=result2.start[component];var index=result1.start.impliedComponents.indexOf(component);result1.start.impliedComponents.splice(index,1)}});impliedComponents2.forEach(function(component){if(!result1.start.impliedComponents||result1.start.impliedComponents.indexOf(component)<0){result2.start[component]=result1.start[component];var index=result1.start.impliedComponents.indexOf(component);result2.start.impliedComponents.splice(index,1)}});if(moment(result2.start.date()).diff(moment(result1.start.date()))>0){return new chrono.ParseResult({referenceDate:result1.ref,index:result1.index,start:result1.start,end:result2.start,text:mergedText,referenceDate:result1.referenceDate})}else{return new chrono.ParseResult({referenceDate:result1.ref,index:result1.index,start:result2.start,end:result1.start,text:mergedText,referenceDate:result1.referenceDate})}};parser.extractTime=function(text,result){var SUFFIX_PATTERN=/\s*(at)?\s*([0-9]{1,2})((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?/i;var TO_SUFFIX_PATTERN=/\s*(\-|\~|\〜|to)?\s*([0-9]{1,2})((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?/i;if(text.length<=result.index+result.text.length)return null;text=text.substr(result.index+result.text.length);var matchedTokens=text.match(SUFFIX_PATTERN);if(!matchedTokens||text.indexOf(matchedTokens[0])!=0)return null;var minute=0;var second=0;var hour=matchedTokens[2];hour=parseInt(hour);if(matchedTokens[10]){if(hour>12)return null;if(matchedTokens[10].toLowerCase()=="pm"){hour+=12}}if(matchedTokens[5]){minute=matchedTokens[5];minute=parseInt(minute);if(minute>=60)return null}if(matchedTokens[8]){second=matchedTokens[8];second=parseInt(second);if(second>=60)return null}result.text=result.text+matchedTokens[0];if(result.start.hour==undefined){result.start.hour=hour;result.start.minute=minute;result.start.second=second}text=text.substr(matchedTokens[0].length);var matchedTokens=text.match(TO_SUFFIX_PATTERN);if(!matchedTokens||text.indexOf(matchedTokens[0])!=0){if(result.end&&result.end.hour==undefined){result.end.hour=hour;result.end.minute=minute;result.end.second=second}return new chrono.ParseResult(result)}var minute=0;var second=0;var hour=matchedTokens[2];hour=parseInt(hour);if(matchedTokens[10]){if(hour>12)return null;if(matchedTokens[10].toLowerCase()=="pm"){hour+=12}}if(matchedTokens[5]){minute=matchedTokens[5];minute=parseInt(minute);if(minute>=60)return null}if(matchedTokens[8]){second=matchedTokens[8];second=parseInt(second);if(second>=60)return null}result.text=result.text+matchedTokens[0];if(!result.end){result.end=JSON.parse(JSON.stringify(result.start));result.end.hour=hour;result.end.minute=minute;result.end.second=second}else{result.end.hour=hour;result.end.minute=minute;result.end.second=second}return new chrono.ParseResult(result)};parser.extractConcordance=function(text,result){var conLength=30;preText=text.substr(0,result.index);preText=preText.replace(/(\r\n|\n|\r)/gm," ");preText=preText.replace(/(\s+)/gm," ");if(preText.length>conLength)preText="..."+preText.substr(preText.length-conLength+3,conLength-3);else preText=preText.substr(0,conLength);posText=text.substr(result.index+result.text.length);posText=posText.replace(/(\r\n|\n|\r)/gm," ");posText=posText.replace(/(\s+)/gm," ");if(posText.length>conLength)posText=posText.substr(0,conLength-3)+"...";else posText=posText.substr(0,conLength);result.concordance=preText+result.text+posText;return new chrono.ParseResult(result)};parser.exec=function(){if(searchingFinished)return null;var index=searchingText.search(this.pattern());if(index<0){searchingFinished=true;return null}var matchedIndex=index+searchingIndex;var result=this.extract(text,matchedIndex);if(result){if(searchingResults.length>0){var oldResult=searchingResults[searchingResults.length-1];var overlapResult=this.mergeOverlapResult(text,oldResult,result);result=overlapResult||result}if(result.start.hour===undefined||result.end&&result.end.hour===undefined){var timedResult=this.extractTime(text,result);result=timedResult||result}if(result.start.hour===undefined)result.startDate=moment(result.startDate).startOf("day").hours(12).toDate();if(result.end&&result.end.hour===undefined)result.endDate=moment(result.endDate).startOf("day").hours(12).toDate();this.extractConcordance(text,result);searchingResults.push(result)}searchingText=searchingText.substr(index+1);searchingIndex=matchedIndex+1;return result};parser.execAll=function(){while(!this.finished())this.exec()};return parser}chrono.Parser=Parser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function IntegratedParser(text,ref,opt,parserTypes){opt=opt||{};ref=ref||new Date;parserTypes=parserTypes||Object.keys(chrono.parsers);var parser=chrono.Parser(text,ref,opt);var currentParserIndex=0;var parsers=[];var results=[];for(var i=0;i<parserTypes.length;i++){if(chrono.parsers[parserTypes[i]])parsers.push(new chrono.parsers[parserTypes[i]](text,ref,opt))}parser.results=function(){return results};parser.finished=function(){return currentParserIndex>=parsers.length};parser.exec=function(){if(currentParserIndex>=parsers.length)return;var currenParser=parsers[currentParserIndex];var result=currenParser.exec();if(result)insertResult(results,result);if(currenParser.finished()){currentParserIndex++}return result};return parser}function insertResult(results,newResult){var index=0;while(index<results.length&&results[index].index<newResult.index)index++;if(index<results.length){var overlapped_index=index;while(overlapped_index<results.length&&results[overlapped_index].index<newResult.index+newResult.text.length){if(results[overlapped_index].text.length>=newResult.text.length)return;overlapped_index++}results.splice(index,overlapped_index-index)}if(index-1>=0){var oldResult=results[index-1];if(newResult.index<oldResult.index+oldResult.text.length){if(oldResult.text.length>=newResult.text.length)return;else{results.splice(index-1,1);index=index-1}}}results.splice(index,0,newResult);return results}chrono.IntegratedParser=IntegratedParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/((this|last|next)\s*)?(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)(\W|$)/i;var DAYS_OFFSET={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};function DayOfWeekParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[4].length);var prefix=matchedTokens[2];var dayOfWeek=matchedTokens[3];dayOfWeek=dayOfWeek.toLowerCase();var offset=DAYS_OFFSET[dayOfWeek];if(offset===undefined)return null;var date=moment(ref).clone();if(prefix){prefix=prefix.toLowerCase();if(prefix=="last")date.day(offset-7);else if(prefix=="next")date.day(offset+7);else if(prefix=="this")date.day(offset)}else{var ref_offset=date.day();if(offset>ref_offset)date.day(offset);else date.day(offset+7)}return new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}})};return parser}chrono.parsers.DayOfWeekParser=DayOfWeekParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(today|tomorrow|yesterday|last\s*night|([1-9]+)\s*day(s)\s*ago|([0-9]{1,2})(\.|\:|\：)([0-9]{1,2}))(\W|$)/i;function GeneralDateParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(full_text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=full_text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0].toLowerCase();text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[7].length);var date=null;var lowercase_text=text.toLowerCase();if(lowercase_text=="today")date=moment(ref).clone();else if(lowercase_text=="tomorrow")date=moment(ref).clone().add("d",1);else if(lowercase_text=="yesterday")date=moment(ref).clone().add("d",-1);else if(lowercase_text.match("last"))date=moment(ref).clone().add("d",-1);else if(lowercase_text.match("ago")){var days_ago=matchedTokens[2];days_ago=parseInt(days_ago);date=moment(ref).clone().add("d",-days_ago)}else{date=moment(ref).clone();text=""}var result=new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}});var resultWithTime=parser.extractTime(full_text,result);result=resultWithTime||result;if(lowercase_text.match("night")){if(!resultWithTime){result.start.day=date.date()+1;result.start.hour=0;result.start.minute=0;result.start.second=0;result.start.impliedComponents=["hour","minute","second"];result=new chrono.ParseResult(result)}else if(resultWithTime.start.hour<12){date.add("d",1);result.start.day=date.date();result.start.month=date.month();result.start.year=date.year();result=new chrono.ParseResult(result)}}return result};return parser}chrono.parsers.GeneralDateParser=GeneralDateParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})(\W|$)/i;function InternationalStandardParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[4].length);var date=moment(text,"YYYY-MM-DD");if(date.format("YYYY-M-D")!=text&&date.format("YYYY-MM-DD")!=text){return null}return new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}})};return parser}chrono.parsers.InternationalStandardParser=InternationalStandardParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var regFullPattern=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?([0-9]{1,2})(st|nd|rd|th)?(\s*(to|\-)?\s*([0-9]{1,2})(st|nd|rd|th)?)?\s*(January|Jan|February|Feb|March|Mar|April|Apr|May|June|Jun|July|Jul|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)(\s*[0-9]{2,4})(\s*BE)?(\W|$)/i;var regShortPattern=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?([0-9]{1,2})(st|nd|rd|th)?(\s*(to|\-)?\s*([0-9]{1,2})(st|nd|rd|th)?)?\s*(January|Jan|February|Feb|March|Mar|April|Apr|May|June|Jun|July|Jul|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)(\W|$)/i;function MonthNameLittleEndianParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return regShortPattern};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var impliedComponents=[];var date=null;text=text.substr(index);originalText=text;var matchedTokens=text.match(regFullPattern);if(matchedTokens&&text.indexOf(matchedTokens[0])==0){text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[12].length);originalText=text;if(matchedTokens[4])text=text.replace(matchedTokens[4],"");if(matchedTokens[5])text=text.replace(matchedTokens[5],"");var years=matchedTokens[10];years=parseInt(years);if(years<100){if(years>20)years=null;else years=years+2e3}else if(matchedTokens[11]){text=text.replace(matchedTokens[11],"");years=years-543}text=text.replace(matchedTokens[10]," "+years);date=moment(text,"DD MMMM YYYY");if(!date)return null}else{matchedTokens=text.match(regShortPattern);if(!matchedTokens)return null;var text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[10].length);originalText=text;if(matchedTokens[4])text=text.replace(matchedTokens[4],"");if(matchedTokens[5])text=text.replace(matchedTokens[5],"");date=moment(text,"DD MMMM");if(!date)return null;impliedComponents.push("year");date.year(moment(ref).year());var nextYear=date.clone().add("y",1);var lastYear=date.clone().add("y",-1);if(Math.abs(nextYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=nextYear}else if(Math.abs(lastYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=lastYear}}if(matchedTokens[7]){var endDay=parseInt(matchedTokens[7]);var startDay=parseInt(matchedTokens[3]);var endDate=date.clone();date.date(startDay);endDate.date(endDay);if(date.format("D")!=matchedTokens[3])return null;if(endDate.format("D")!=matchedTokens[7])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),impliedComponents:impliedComponents},end:{day:endDate.date(),month:endDate.month(),year:endDate.year(),impliedComponents:impliedComponents}})}else{if(date.format("D")!=matchedTokens[3])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),impliedComponents:impliedComponents}})}};var baseExtractTime=parser.extractTime;parser.extractTime=function(text,result){var DAY_OF_WEEK_SUFFIX_PATTERN=/(\,|\(|\s)*(Sun|Sunday|Mon|Monday|Tue|Tuesday|Wed|Wednesday|Thur|Thursday|Fri|Friday|Sat|Saturday)(\,|\)|\s)*/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length);var matchedTokens=suffix_text.match(DAY_OF_WEEK_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){result.text=result.text+matchedTokens[0]}return baseExtractTime.call(this,text,result)};return parser}chrono.parsers.MonthNameLittleEndianParser=MonthNameLittleEndianParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var regFullPattern=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?(,)?(\s*[0-9]{4})(\s*BE)?/i;var regShortPattern=/((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?([^0-9]|$)/i;function MonthNameMiddleEndianParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return regShortPattern};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var impliedComponents=[];var date=null;text=text.substr(index);originalText=text;var matchedTokens=text.match(regFullPattern);if(matchedTokens&&text.indexOf(matchedTokens[0])==0){var text=matchedTokens[0];originalText=text;text=text.replace(matchedTokens[1],"");text=text.replace(matchedTokens[3],matchedTokens[3]+" ");if(matchedTokens[4])text=text.replace(matchedTokens[4],"");if(matchedTokens[9])text=text.replace(matchedTokens[9],"");if(matchedTokens[10])text=text.replace(",","");if(matchedTokens[12]){var years=matchedTokens[11];years=" "+(parseInt(years)-543);text=text.replace(matchedTokens[12],"");text=text.replace(matchedTokens[11],years)}date=moment(text,"MMMM DD YYYY");if(!date)return null}else{matchedTokens=text.match(regShortPattern);if(!matchedTokens)return null;text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[10].length);originalText=text;text=text.replace(matchedTokens[1],"");text=text.replace(matchedTokens[3],matchedTokens[3]+" ");if(matchedTokens[4])text=text.replace(matchedTokens[4],"");date=moment(text,"MMMM DD");if(!date)return null;impliedComponents.push("year");date.year(moment(ref).year());var nextYear=date.clone().add("y",1);var lastYear=date.clone().add("y",-1);if(Math.abs(nextYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=nextYear}else if(Math.abs(lastYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=lastYear}}if(matchedTokens[4]){var endDay=parseInt(matchedTokens[8]);var startDay=parseInt(matchedTokens[5]);var endDate=date.clone();date.date(startDay);endDate.date(endDay);if(date.format("D")!=matchedTokens[5])return null;if(endDate.format("D")!=matchedTokens[8])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),impliedComponents:impliedComponents},end:{day:endDate.date(),month:endDate.month(),year:endDate.year(),impliedComponents:impliedComponents}})}else{if(date.format("D")!=matchedTokens[8])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),impliedComponents:impliedComponents}})}};var baseExtractTime=parser.extractTime;parser.extractTime=function(text,result){var DAY_OF_WEEK_SUFFIX_PATTERN=/(\,|\(|\s)*(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)(\,|\)|\s)*/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length,15);var matchedTokens=suffix_text.match(DAY_OF_WEEK_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){result.text=result.text+matchedTokens[0]}if(!result.start.impliedComponents||result.start.impliedComponents.indexOf("year")<0)return baseExtractTime.call(this,text,result);var YEAR_SUFFIX_PATTERN=/(\s*[0-9]{4})(\s*BE)?/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length,15);var matchedTokens=suffix_text.match(YEAR_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){var years=matchedTokens[1];years=parseInt(years);if(years<100){if(years>20)years=null;else years=years+2e3}else if(matchedTokens[2]){years=years-543}var index=result.start.impliedComponents.indexOf("year");result.start.impliedComponents.splice(index,1);result.start.year=years;result.text=result.text+matchedTokens[0]}return baseExtractTime.call(this,text,result)};return parser}chrono.parsers.MonthNameMiddleEndianParser=MonthNameMiddleEndianParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(\W|^)([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4}|[0-9]{2})(\W|$)/i;function SlashParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null)return;var text=matchedTokens[0].substr(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[5].length);var orginalText=text;index+=matchedTokens[1].length;var date=null;var years=matchedTokens[4];years=parseInt(years);if(years<100){if(years>50){years=years+2500-543}else{years=years+2e3}text=matchedTokens[2]+"/"+matchedTokens[3]+"/"+years}date=moment(text,"MM/DD/YYYY");if(!date||date.format("D")!=matchedTokens[3]){date=moment(text,"DD/MM/YYYY");if(!date||date.format("D")!=matchedTokens[2])return null}return new chrono.ParseResult({referenceDate:ref,text:orginalText,index:index,start:{day:date.date(),month:date.month(),year:date.year()}})};return parser}chrono.parsers.SlashParser=SlashParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(วัน)?(อาทิตย์|จันทร์|อังคาร|พุธ|พฤหัสบดี|ศุกร์|เสาร์)(หน้า|นี้|ที่แล้ว|.|$)/i;var DAYS_OFFSET={"อาทิตย์":0,"จันทร์":1,"อังคาร":2,"พุธ":3,"พฤหัสบดี":4,"ศุกร์":5,"เสาร์":6};function THDayOfWeekParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.parsers.THGeneralDateParser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null)return;var text=matchedTokens[0];var dayOfWeek=matchedTokens[2];dayOfWeek=dayOfWeek.toLowerCase();var offset=DAYS_OFFSET[dayOfWeek];if(offset===undefined)return null;var date=moment(ref).clone();var suffix=matchedTokens[3];if(suffix=="นี้"){date.day(offset)}else if(suffix=="หน้า"){date.day(offset+7)}else if(suffix=="ที่แล้ว"){date.day(offset-7)}else{date.day(offset);text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[3].length)}return new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}})};return parser}chrono.parsers.THDayOfWeekParser=THDayOfWeekParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(วันนี้|พรุ่งนี้|เมื่อวาน|เมื่อคืน|([1-9]+)\s*(วัน|คืน)(ก่อน|ที่แล้ว))(\W|$)/i;function THGeneralDateParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(full_text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=full_text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0].toLowerCase();text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[5].length);var date=null;if(text=="วันนี้")date=moment(ref).clone();else if(text=="พรุ่งนี้")date=moment(ref).clone().add("d",1);else if(text=="เมื่อวาน")date=moment(ref).clone().add("d",-1);else if(text=="เมื่อคืน")date=moment(ref).clone().add("d",-1);else{var days_ago=matchedTokens[2];days_ago=parseInt(days_ago);date=moment(ref).clone().add("d",-days_ago)}var result=new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}});var resultWithTime=parser.extractTime(full_text,result);result=resultWithTime||result;if(text.match("คืน")){if(!resultWithTime){result.start.day=date.date()+1;result.start.hour=0;result.start.minute=0;result.start.second=0;result=new chrono.ParseResult(result)}else if(resultWithTime.start.hour<12){date.add("d",1);result.start.day=date.date();result.start.month=date.month();result.start.year=date.year();result=new chrono.ParseResult(result)}}return result};return parser}chrono.parsers.THGeneralDateParser=THGeneralDateParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var regFullPattern=/([0-9]{1,2})(\s*(ถึง|\-)?\s*([0-9]{1,2}))?\s+(มกราคม|ม.ค.|กุมภาพัน|ก.พ.|มีนาคม|มี.ค.|เมษายน|เม.ย.|พฤษภาคม|พ.ค.|มิถุนายน|ม.ย.|มิ.ย.|กรกฎาคม|ก.ค.|สิงหาคม|ส.ค.|กันยายน|ก.ย.|ตุลาคม|ต.ค.|พฤศจิกายน|พ.ย.|ธันวาคม|ธ.ค.)(พ.ศ.|ค.ศ.)?(\s+[0-9]{2,4})(\W|$)/i;var regShortPattern=/([0-9]{1,2})(\s*(ถึง|\-)?\s*([0-9]{1,2}))?\s+(มกราคม|ม.ค.|กุมภาพัน|ก.พ.|มีนาคม|มี.ค.|เมษายน|เม.ย.|พฤษภาคม|พ.ค.|มิถุนายน|ม.ย.|มิ.ย.|กรกฏาคม|ก.ค.|สิงหาคม|ส.ค.|กันยายน|ก.ย.|ตุลาคม|ต.ค.|พฤศจิกายน|พ.ย.|ธันวาคม|ธ.ค.)(\W|$)/i;var momthTranslation={"มกราคม":0,"ม.ค.":0,"กุมภาพัน":1,"ก.พ.":1,"มีนาคม":2,"มี.ค.":2,"เมษายน":3,"เม.ย.":4,"พฤษภาคม":4,"พ.ค.":4,"มิถุนายน":5,"มิ.ย.":5,"กรกฎาคม":6,"ก.ค.":6,"สิงหาคม":7,"ส.ค.":7,"กันยายน":8,"ก.ย.":8,"ตุลาคม":9,"ต.ค.":9,"พฤศจิกายน":10,"พ.ย.":10,"ธันวาคม":11,"ธ.ค.":11};function THMonthNameLittleEndianParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.parsers.THGeneralDateParser(text,ref,opt);parser.pattern=function(){return regShortPattern};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var date=null;text=text.substr(index);originalText=text;var matchedTokens=text.match(regFullPattern);if(matchedTokens&&text.indexOf(matchedTokens[0])==0){text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[8].length);originalText=text;var years=matchedTokens[7];years=parseInt(years);if(matchedTokens[3]&&matchedTokens[3]=="ค.ศ."){if(years<=30)years=years+2e3;else if(years<100)years=years+1900}else{if(years<543)years=years+2500;years=years-543}var months=momthTranslation[matchedTokens[5]];if(typeof months!="number")return null;var days=matchedTokens[1];days=parseInt(days);var formatedText=years+"-"+(months+1)+"-"+days;var date=moment(formatedText,"YYYY-MM-DD");if(date.format("YYYY-M-D")!=formatedText){return null}}else{matchedTokens=text.match(regShortPattern);if(!matchedTokens)return null;var text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[6].length);originalText=text;var months=momthTranslation[matchedTokens[5]];if(typeof months!="number")return null;var days=matchedTokens[1];days=parseInt(days);var formatedText=months+1+"-"+days;var date=moment(formatedText,"MM-DD");if(date.format("M-D")!=formatedText){return null}date.year(moment(ref).year());var nextYear=date.clone().add("y",1);var lastYear=date.clone().add("y",-1);if(Math.abs(nextYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=nextYear}else if(Math.abs(lastYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=lastYear}}if(matchedTokens[4]){var endDay=parseInt(matchedTokens[4]);var startDay=parseInt(matchedTokens[1]);var endDate=date.clone();date.date(startDay);endDate.date(endDay);if(date.format("D")!=matchedTokens[1])return null;if(endDate.format("D")!=matchedTokens[4])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year()},end:{day:endDate.date(),month:endDate.month(),year:endDate.year()}})}return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year()}})};return parser}chrono.parsers.THMonthNameLittleEndianParser=THMonthNameLittleEndianParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(今日|昨日|明日|([1-9]+)\s*日前)(\W|$)/i;function JPGeneralDateParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(full_text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=full_text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0].toLowerCase();text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[3].length);var date=null;if(text=="今日")date=moment(ref).clone();else if(text=="明日")date=moment(ref).clone().add("d",1);else if(text=="昨日")date=moment(ref).clone().add("d",-1);else{var days_ago=matchedTokens[2];days_ago=parseInt(days_ago);date=moment(ref).clone().add("d",-days_ago)}var result=new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}});var resultWithTime=parser.extractTime(full_text,result);result=resultWithTime||result;return result};var baseExtractTime=parser.extractTime;parser.extractTime=function(text,result){var baseResult=baseExtractTime.call(this,text,result);if(baseResult)return baseResult;var SUFFIX_PATTERN=/\s*(午前|午後)?\s*([0-9]{1,2})時?(([0-9]{1,2})分)?/i;if(text.length<=result.index+result.text.length)return null;text=text.substr(result.index+result.text.length);var matchedTokens=text.match(SUFFIX_PATTERN);if(!matchedTokens||text.indexOf(matchedTokens[0])!=0)return null;
var minute=0;var second=0;var hour=matchedTokens[2];hour=parseInt(hour);if(matchedTokens[1]){if(hour>12)return null;if(matchedTokens[1]=="午後"){hour+=12}}if(matchedTokens[4]){minute=matchedTokens[4];minute=parseInt(minute);if(minute>=60)return null}result.text=result.text+matchedTokens[0];if(result.start.hour==undefined){result.start.hour=hour;result.start.minute=minute;result.start.second=second}if(result.end&&result.end.hour==undefined){result.end.hour=hour;result.end.minute=minute;result.end.second=second}return new chrono.ParseResult(result)};return parser}chrono.parsers.JPGeneralDateParser=JPGeneralDateParser}();!function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(同|((平成)?([0-9０-９]{2,4}))年)?\s*([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i;function cleanZengakuNumber(str){var cleanStr=str;cleanStr=cleanStr.replace(/０/g,"0");cleanStr=cleanStr.replace(/１/g,"1");cleanStr=cleanStr.replace(/２/g,"2");cleanStr=cleanStr.replace(/３/g,"3");cleanStr=cleanStr.replace(/４/g,"4");cleanStr=cleanStr.replace(/５/g,"5");cleanStr=cleanStr.replace(/６/g,"6");cleanStr=cleanStr.replace(/７/g,"7");cleanStr=cleanStr.replace(/８/g,"8");cleanStr=cleanStr.replace(/９/g,"9");return cleanStr}function JPStandardDateParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.parsers.JPGeneralDateParser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(full_text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=full_text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0].toLowerCase();var date=null;text=matchedTokens[0];var months=matchedTokens[5];months=cleanZengakuNumber(months);months=parseInt(months);if(!months||months==NaN)return null;var days=matchedTokens[6];days=cleanZengakuNumber(days);days=parseInt(days);if(!days||days==NaN)return null;var years=matchedTokens[4];if(years){years=cleanZengakuNumber(years);years=parseInt(years)}if(years&&years!==NaN){if(matchedTokens[3]=="平成"){years=years+1989}else if(years<100){years=years+2e3}var dateText=years+"-"+months+"-"+days;date=moment(dateText,"YYYY-MM-DD");if(date.format("YYYY-M-D")!=dateText)return null}else{var dateText=months+"-"+days;date=moment(dateText,"MM-DD");date.year(moment(ref).year());var nextYear=date.clone().add("y",1);var lastYear=date.clone().add("y",-1);if(Math.abs(nextYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=nextYear}else if(Math.abs(lastYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=lastYear}}var result=new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year()}});var resultWithTime=parser.extractTime(full_text,result);result=resultWithTime||result;return result};var baseExtractTime=parser.extractTime;parser.extractTime=function(text,result){var DAY_OF_WEEK_SUFFIX_PATTERN=/(\,|\(|（|\s)*(月|火|水|木|金|土|日)(曜日|曜)?\s*(\,|）|\))/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length);var matchedTokens=suffix_text.match(DAY_OF_WEEK_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){result.text=result.text+matchedTokens[0]}return baseExtractTime.call(this,text,result)};return parser}chrono.parsers.JPStandardDateParser=JPStandardDateParser}();